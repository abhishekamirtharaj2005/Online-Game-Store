<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Handmade Games Store — Base</title>
  <style>
    :root{
      --bg:#0f1724; /* dark navy */
      --card:#774a8b;
      --accent:#7c3aed;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
      --radius:12px;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#061026);color:#e6eef8;}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;background:transparent}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700}
    .site-title{font-size:18px;font-weight:600}
    nav{display:flex;gap:12px;align-items:center}
    .search{background:var(--glass);border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:10px;display:flex;align-items:center;gap:8px}
    .search input{background:transparent;border:0;outline:none;color:inherit;width:220px}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;cursor:pointer}
    .cart-btn{position:relative}
    .cart-count{position:absolute;top:-6px;right:-6px;background:var(--accent);color:#061026;border-radius:999px;padding:3px 6px;font-size:12px}

    main{padding:24px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:var(--radius);border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:10px}
    .thumb{height:140px;border-radius:10px;overflow:hidden;background:#071022;display:flex;align-items:center;justify-content:center}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .title{font-weight:700}
    .price{font-weight:700;color:var(--accent)}
    .actions{display:flex;gap:8px}
    .add{flex:1;padding:8px;border-radius:10px;background:var(--accent);border:0;color:#041226;cursor:pointer}

    footer{padding:20px;text-align:center;color:var(--muted)}

    /* cart modal */
    .cart-modal{position:fixed;right:18px;bottom:18px;width:320px;background:var(--card);border-radius:14px;padding:12px;box-shadow:0 8px 30px rgba(249, 249, 249, 0.6);display:none}
    .cart-modal.open{display:block}
    .cart-list{max-height:260px;overflow:auto;display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
    .cart-item{display:flex;gap:8px;align-items:center}
    .cart-item img{width:48px;height:48px;border-radius:8px;object-fit:cover}
    .qty-controls{display:flex;gap:6px;align-items:center}

    /* responsive */
    @media (max-width:640px){
      .search input{width:120px}
      header{padding:12px}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">G</div>
      <div>
        <div class="site-title">GameCraft</div>
        <div style="font-size:12px;color:var(--muted)">Handmade & indie games</div>
      </div>
    </div>
    <nav>
      <div class="search" role="search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <input id="searchInput" placeholder="Search games, tags..." />
      </div>
      <button class="btn" id="filterBtn">Filters</button>
      <button class="btn cart-btn" id="cartBtn" aria-label="Open cart">
        Cart
        <span class="cart-count" id="cartCount">0</span>
      </button>
    </nav>
  </header>

  <main>
    <section>
      <h2 style="margin:0 0 12px 0">Featured Games</h2>
      <div class="grid" id="productGrid">
        <!-- product cards injected by JS -->
      </div>
    </section>
  </main>

  <div class="cart-modal" id="cartModal" aria-hidden="true">
    <h3 style="margin:0 0 8px 0">Cart</h3>
    <div class="cart-list" id="cartList"></div>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <strong id="cartTotal">Total: $0.00</strong>
      <button class="btn" id="checkoutBtn">Checkout</button>
    </div>
  </div>

  <footer>
    © <span id="year"></span> GameCraft — built with HTML, CSS, JS
  </footer>

  <script>
    // ---- SAMPLE DATA ----
    const products = [
      {id:1,title:'Pixel Odyssey',price:9.99,img:'PO.jpeg',tags:['pixel','platformer']},
      {id:2,title:'Mystic Cards',price:4.99,img:'MC.jpeg',tags:['card','strategy']},
      {id:3,title:'Neon Drift',price:7.49,img:'ND.jpeg',tags:['racing','arcade']},
      {id:4,title:'Forest Tale',price:5.00,img:'FT.jpeg',tags:['adventure','puzzle']},
      {id:5,title:'Rogue Bloom',price:8.25,img:'RB.jpeg',tags:['roguelike','indie']},
      {id:6,title:'Skysmith',price:6.50,img:'SS.jpeg',tags:['simulation','crafting']}
    ];

    // ---- CART STATE (persisted) ----
    let cart = JSON.parse(localStorage.getItem('cart_v1') || '{}');

    // ---- DOM refs ----
    const grid = document.getElementById('productGrid');
    const cartCount = document.getElementById('cartCount');
    const cartModal = document.getElementById('cartModal');
    const cartBtn = document.getElementById('cartBtn');
    const cartList = document.getElementById('cartList');
    const cartTotal = document.getElementById('cartTotal');
    const searchInput = document.getElementById('searchInput');
    const yearEl = document.getElementById('year');

    yearEl.textContent = new Date().getFullYear();

    // render products into grid
    function renderProducts(list){
      grid.innerHTML = '';
      list.forEach(p => {
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <div class="thumb"><img src="${p.img}" alt="${p.title}"/></div>
          <div class="meta"><div class="title">${p.title}</div><div class="price">$${p.price.toFixed(2)}</div></div>
          <div style="color:var(--muted);font-size:13px">${p.tags.join(' • ')}</div>
          <div class="actions"><button class="add" data-id="${p.id}">Add to cart</button></div>
        `;
        grid.appendChild(card);
      });
    }

    // cart helpers
    function saveCart(){ localStorage.setItem('cart_v1', JSON.stringify(cart)); }

    function addToCart(id){
      const key = String(id);
      cart[key] = cart[key] ? cart[key] + 1 : 1;
      saveCart();
      updateCartUI();
    }

    function removeFromCart(id){
      const key = String(id);
      delete cart[key];
      saveCart();
      updateCartUI();
    }

    function changeQty(id, delta){
      const key = String(id);
      cart[key] = Math.max(1,(cart[key]||0) + delta);
      if(cart[key] <= 0) delete cart[key];
      saveCart();
      updateCartUI();
    }

    function cartItemsDetailed(){
      return Object.keys(cart).map(k => {
        const prod = products.find(p=>p.id===Number(k));
        return {product:prod, qty:cart[k]};
      });
    }

    function updateCartUI(){
      // count
      const totalCount = Object.values(cart).reduce((s,v)=>s+v,0);
      cartCount.textContent = totalCount;

      // render list
      cartList.innerHTML = '';
      const items = cartItemsDetailed();
      let total = 0;
      items.forEach(it => {
        const el = document.createElement('div'); el.className='cart-item';
        el.innerHTML = `
          <img src="${it.product.img}" alt="${it.product.title}"/>
          <div style="flex:1">
            <div style="font-weight:700">${it.product.title}</div>
            <div style="font-size:13px;color:var(--muted)">$${it.product.price.toFixed(2)}</div>
          </div>
          <div class="qty-controls">
            <button class="btn small" data-action="dec" data-id="${it.product.id}">-</button>
            <div>${it.qty}</div>
            <button class="btn small" data-action="inc" data-id="${it.product.id}">+</button>
            <button class="btn" data-action="remove" data-id="${it.product.id}">x</button>
          </div>
        `;
        cartList.appendChild(el);
        total += it.product.price * it.qty;
      });
      cartTotal.textContent = 'Total: $' + total.toFixed(2);
    }

    // initial render
    renderProducts(products);
    updateCartUI();

    // event delegation for add-to-cart
    grid.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-id]');
      if(!btn) return;
      const id = Number(btn.dataset.id);
      addToCart(id);
    });

    // cart toggle
    cartBtn.addEventListener('click', ()=>{ cartModal.classList.toggle('open'); cartModal.setAttribute('aria-hidden', !cartModal.classList.contains('open')) });

    // cart actions
    cartList.addEventListener('click',(e)=>{
      const a = e.target.closest('button[data-action]');
      if(!a) return;
      const id = Number(a.dataset.id);
      const action = a.dataset.action;
      if(action==='remove') removeFromCart(id);
      if(action==='dec') changeQty(id, -1);
      if(action==='inc') changeQty(id, +1);
    });

    // simple search
    searchInput.addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase();
      if(!q) return renderProducts(products);
      const filtered = products.filter(p => p.title.toLowerCase().includes(q) || p.tags.join(' ').toLowerCase().includes(q));
      renderProducts(filtered);
    });

    // checkout (placeholder)
    document.getElementById('checkoutBtn').addEventListener('click', ()=>{
      alert('Checkout is a demo. Integrate with payment provider (Stripe/PayPal) for real purchases.');
    });
  </script>
</body>
</html>
